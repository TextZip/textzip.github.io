<!DOCTYPE html>
<html lang="en-US" 
>
<head>
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="Dino Game Arduino Edition" />
<meta name="author" content="Jai Krishna" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Introduction I always had a thing for wearable electronics, a few months ago I got a cheap TFT display to play around with and the ultimate goal was to get familiar with all the electronics so that I can try to scale everything down and make a (hopefully portable) smartwatch. I stumbled upon the flappy bird game for arduino by mrt-prodz while looking for some good projects with the TFT display, after playing the game for a couple of times, I decided to build my own version of the classic “Dino Game” from chromium. All the code files and assets for the project can be found in the following repo: Hardware &amp; Schematics Components Arduino Uno Push Button TFT Display 1.8 Inches (128x160) Buzzer A few jumpers Schematic The TFT display I got is based on the ST7735 Driver IC while it also had an SD card slot I ended up saving all the required data in flash as I didn’t have an SD card at hand. The wiring for the TFT was a bit of a pain but thanks to help from Tweaking4all I finally got it running. The other connections for the buzzer and the push button are quite easy and require no explanation. I did notice that the flappy bird game didn’t actually use an interrupt based trigger but rather had a normal digitalRead function. I decided to use the internal pull and the external interrupt triggered ISR for servicing the user input via the digital pin 2. The Display uses SPI communication, so I ended up using the SPI hardware pins of the ardunio uno for communicating with the display. Tinkercad doesn’t have a model for the TFT display, so I just labeled the connections and dropped them onto a breadboard. My final setup with everything jam-packed into a tiny breadboard, as I didn’t have anything bigger than this with me. Another view of my TFT display for anyone’s reference Software The software stack can be broken down into the following sub-tasks Make a box that jumps This step was supposed to be fairly easy and people actually use the euler’s integration method to give an object some force (acceleration) and then compute the velocity and displacement numerically using a very small dt. [acceleration = force / mass] [Delta_{position} = velocity * dt] [Delta_{velocity} = acceleration * dt] I for some reason ended up using the equation of motion of a projectile under constant acceleration. [y = ut + \dfrac{1}{2}at^2] Everytime the button was pushed the box ended up with an initial velocity of $30 m/s$, I played around with the value of acceleration due to gravity and the initial velocity to get the right jump response. Things ended up looking like this (PS: don’t mind the moving cactus in the background) Draw cactus and make it move around I used some basic shapes (rounded rectangles) to make a cactus like object and gave it a constant velocity in the -ve x direction to make it look like the dino is moving forward. I used the brush method that was discussed in the mrt-prodz post for animations, which basically meant I erased the old pixels by drawing the background color over them and then drew the required colors over the new pixels, therefore I had to change a few selected pixels in each frame rather than the whole 128x160 of them. Replace box with a dino I next tried replacing the box with a dino(bitmap), it looked like the dino was skating over the floor, and was quite artificial. I decided to make the dino walk as the original game does that as well, after snipping the two walking frames from the sprite sheet, I tried a simple code where I switched between the frames to make it look like the dino is walking. Walking vs Skating Dino The above method was a partial success as the entire dino image was now having a weird flicker due to the update speed and I realised that I was updating the whole dino bitmap but most of the body was stationary and only the legs were supposed to move. I ended up fixing this by breaking the 2 dino frames into 2 parts each (4 in total), where the top part of each frame was the body and the bottom part was the leg, luckily the animation was setup in such a way that the body of the dino never actually changed between the two frames and only the leg positions were changed, so I fixed the body and only updated the leg parts of the dino, this eliminated most or if not all the flicker and I ended up with a very smooth looking animation. Adding Clouds, Sounds, Score and other minor details I now added other small details like sounds, intro and game over frames. I also added the score display and other features. I wanted to give a cloudy background for the game as the original has as it not only helps in the aesthetics but also in showing that the dino is moving relative to the background all the time. I tired using clouds from bitmaps but there was a bit too much of a flicker in the clouds and there were soo small that I their features hardly mattered, so I ended up replacing the bitmaps with regular rounded rectangles which improved the game performance a lot. Results After fixing a few more bugs I finally had a working dino game Future Upgrades While I don’t have immediate plans for improvements, I do have a few features in mind that I wana implement. Add Lives Dino has powers (Fire breathing) New obstacles (Birds?) Remove the flicker due to jumps" />
<meta property="og:description" content="Introduction I always had a thing for wearable electronics, a few months ago I got a cheap TFT display to play around with and the ultimate goal was to get familiar with all the electronics so that I can try to scale everything down and make a (hopefully portable) smartwatch. I stumbled upon the flappy bird game for arduino by mrt-prodz while looking for some good projects with the TFT display, after playing the game for a couple of times, I decided to build my own version of the classic “Dino Game” from chromium. All the code files and assets for the project can be found in the following repo: Hardware &amp; Schematics Components Arduino Uno Push Button TFT Display 1.8 Inches (128x160) Buzzer A few jumpers Schematic The TFT display I got is based on the ST7735 Driver IC while it also had an SD card slot I ended up saving all the required data in flash as I didn’t have an SD card at hand. The wiring for the TFT was a bit of a pain but thanks to help from Tweaking4all I finally got it running. The other connections for the buzzer and the push button are quite easy and require no explanation. I did notice that the flappy bird game didn’t actually use an interrupt based trigger but rather had a normal digitalRead function. I decided to use the internal pull and the external interrupt triggered ISR for servicing the user input via the digital pin 2. The Display uses SPI communication, so I ended up using the SPI hardware pins of the ardunio uno for communicating with the display. Tinkercad doesn’t have a model for the TFT display, so I just labeled the connections and dropped them onto a breadboard. My final setup with everything jam-packed into a tiny breadboard, as I didn’t have anything bigger than this with me. Another view of my TFT display for anyone’s reference Software The software stack can be broken down into the following sub-tasks Make a box that jumps This step was supposed to be fairly easy and people actually use the euler’s integration method to give an object some force (acceleration) and then compute the velocity and displacement numerically using a very small dt. [acceleration = force / mass] [Delta_{position} = velocity * dt] [Delta_{velocity} = acceleration * dt] I for some reason ended up using the equation of motion of a projectile under constant acceleration. [y = ut + \dfrac{1}{2}at^2] Everytime the button was pushed the box ended up with an initial velocity of $30 m/s$, I played around with the value of acceleration due to gravity and the initial velocity to get the right jump response. Things ended up looking like this (PS: don’t mind the moving cactus in the background) Draw cactus and make it move around I used some basic shapes (rounded rectangles) to make a cactus like object and gave it a constant velocity in the -ve x direction to make it look like the dino is moving forward. I used the brush method that was discussed in the mrt-prodz post for animations, which basically meant I erased the old pixels by drawing the background color over them and then drew the required colors over the new pixels, therefore I had to change a few selected pixels in each frame rather than the whole 128x160 of them. Replace box with a dino I next tried replacing the box with a dino(bitmap), it looked like the dino was skating over the floor, and was quite artificial. I decided to make the dino walk as the original game does that as well, after snipping the two walking frames from the sprite sheet, I tried a simple code where I switched between the frames to make it look like the dino is walking. Walking vs Skating Dino The above method was a partial success as the entire dino image was now having a weird flicker due to the update speed and I realised that I was updating the whole dino bitmap but most of the body was stationary and only the legs were supposed to move. I ended up fixing this by breaking the 2 dino frames into 2 parts each (4 in total), where the top part of each frame was the body and the bottom part was the leg, luckily the animation was setup in such a way that the body of the dino never actually changed between the two frames and only the leg positions were changed, so I fixed the body and only updated the leg parts of the dino, this eliminated most or if not all the flicker and I ended up with a very smooth looking animation. Adding Clouds, Sounds, Score and other minor details I now added other small details like sounds, intro and game over frames. I also added the score display and other features. I wanted to give a cloudy background for the game as the original has as it not only helps in the aesthetics but also in showing that the dino is moving relative to the background all the time. I tired using clouds from bitmaps but there was a bit too much of a flicker in the clouds and there were soo small that I their features hardly mattered, so I ended up replacing the bitmaps with regular rounded rectangles which improved the game performance a lot. Results After fixing a few more bugs I finally had a working dino game Future Upgrades While I don’t have immediate plans for improvements, I do have a few features in mind that I wana implement. Add Lives Dino has powers (Fire breathing) New obstacles (Birds?) Remove the flicker due to jumps" />
<link rel="canonical" href="https://textzip.github.io/posts/Dino-Game-Arduino/" />
<meta property="og:url" content="https://textzip.github.io/posts/Dino-Game-Arduino/" />
<meta property="og:site_name" content="Jai Krishna" />
<meta property="og:image" content="https://textzip.github.io/assets/img/DinoGame/Home.gif" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-06-14T01:10:20+05:30" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://textzip.github.io/assets/img/DinoGame/Home.gif" />
<meta property="twitter:title" content="Dino Game Arduino Edition" />
<meta name="twitter:site" content="@twitter_username" />
<meta name="twitter:creator" content="@Jai Krishna" />
<meta name="google-site-verification" content="google_meta_tag_verification" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Jai Krishna"},"dateModified":"2022-01-06T13:23:52+05:30","datePublished":"2021-06-14T01:10:20+05:30","description":"Introduction I always had a thing for wearable electronics, a few months ago I got a cheap TFT display to play around with and the ultimate goal was to get familiar with all the electronics so that I can try to scale everything down and make a (hopefully portable) smartwatch. I stumbled upon the flappy bird game for arduino by mrt-prodz while looking for some good projects with the TFT display, after playing the game for a couple of times, I decided to build my own version of the classic “Dino Game” from chromium. All the code files and assets for the project can be found in the following repo: Hardware &amp; Schematics Components Arduino Uno Push Button TFT Display 1.8 Inches (128x160) Buzzer A few jumpers Schematic The TFT display I got is based on the ST7735 Driver IC while it also had an SD card slot I ended up saving all the required data in flash as I didn’t have an SD card at hand. The wiring for the TFT was a bit of a pain but thanks to help from Tweaking4all I finally got it running. The other connections for the buzzer and the push button are quite easy and require no explanation. I did notice that the flappy bird game didn’t actually use an interrupt based trigger but rather had a normal digitalRead function. I decided to use the internal pull and the external interrupt triggered ISR for servicing the user input via the digital pin 2. The Display uses SPI communication, so I ended up using the SPI hardware pins of the ardunio uno for communicating with the display. Tinkercad doesn’t have a model for the TFT display, so I just labeled the connections and dropped them onto a breadboard. My final setup with everything jam-packed into a tiny breadboard, as I didn’t have anything bigger than this with me. Another view of my TFT display for anyone’s reference Software The software stack can be broken down into the following sub-tasks Make a box that jumps This step was supposed to be fairly easy and people actually use the euler’s integration method to give an object some force (acceleration) and then compute the velocity and displacement numerically using a very small dt. [acceleration = force / mass] [Delta_{position} = velocity * dt] [Delta_{velocity} = acceleration * dt] I for some reason ended up using the equation of motion of a projectile under constant acceleration. [y = ut + \\dfrac{1}{2}at^2] Everytime the button was pushed the box ended up with an initial velocity of $30 m/s$, I played around with the value of acceleration due to gravity and the initial velocity to get the right jump response. Things ended up looking like this (PS: don’t mind the moving cactus in the background) Draw cactus and make it move around I used some basic shapes (rounded rectangles) to make a cactus like object and gave it a constant velocity in the -ve x direction to make it look like the dino is moving forward. I used the brush method that was discussed in the mrt-prodz post for animations, which basically meant I erased the old pixels by drawing the background color over them and then drew the required colors over the new pixels, therefore I had to change a few selected pixels in each frame rather than the whole 128x160 of them. Replace box with a dino I next tried replacing the box with a dino(bitmap), it looked like the dino was skating over the floor, and was quite artificial. I decided to make the dino walk as the original game does that as well, after snipping the two walking frames from the sprite sheet, I tried a simple code where I switched between the frames to make it look like the dino is walking. Walking vs Skating Dino The above method was a partial success as the entire dino image was now having a weird flicker due to the update speed and I realised that I was updating the whole dino bitmap but most of the body was stationary and only the legs were supposed to move. I ended up fixing this by breaking the 2 dino frames into 2 parts each (4 in total), where the top part of each frame was the body and the bottom part was the leg, luckily the animation was setup in such a way that the body of the dino never actually changed between the two frames and only the leg positions were changed, so I fixed the body and only updated the leg parts of the dino, this eliminated most or if not all the flicker and I ended up with a very smooth looking animation. Adding Clouds, Sounds, Score and other minor details I now added other small details like sounds, intro and game over frames. I also added the score display and other features. I wanted to give a cloudy background for the game as the original has as it not only helps in the aesthetics but also in showing that the dino is moving relative to the background all the time. I tired using clouds from bitmaps but there was a bit too much of a flicker in the clouds and there were soo small that I their features hardly mattered, so I ended up replacing the bitmaps with regular rounded rectangles which improved the game performance a lot. Results After fixing a few more bugs I finally had a working dino game Future Upgrades While I don’t have immediate plans for improvements, I do have a few features in mind that I wana implement. Add Lives Dino has powers (Fire breathing) New obstacles (Birds?) Remove the flicker due to jumps","headline":"Dino Game Arduino Edition","image":"https://textzip.github.io/assets/img/DinoGame/Home.gif","mainEntityOfPage":{"@type":"WebPage","@id":"https://textzip.github.io/posts/Dino-Game-Arduino/"},"url":"https://textzip.github.io/posts/Dino-Game-Arduino/"}</script>
 <title>Dino Game Arduino Edition | Jai Krishna
 </title>
<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png">
<link rel="manifest" href="/assets/img/favicons/site.webmanifest">
<link rel="shortcut icon" href="/assets/img/favicons/favicon.ico">
<meta name="apple-mobile-web-app-title" content="Jai Krishna">
<meta name="application-name" content="Jai Krishna">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous">
<link rel="dns-prefetch" href="https://fonts.gstatic.com">
  <link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials">
  <link rel="dns-prefetch" href="https://www.google-analytics.com">
  <link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous">
  <link rel="dns-prefetch" href="https://www.googletagmanager.com">
<link rel="preconnect" href="https://cdn.jsdelivr.net">
<link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css">
<link rel="stylesheet" href="/assets/css/style.css">
<link rel="stylesheet"
    href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css">
  <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script defer
    src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script>
  <script async
    src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js"></script>
<script defer src="/assets/js/dist/post.min.js"></script>
  <script>
  /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */
  MathJax = {
    tex: {
      inlineMath: [              /* start/end delimiter pairs for in-line math */
        ['$','$'],
        ['\\(','\\)']
      ],
      displayMath: [             /* start/end delimiter pairs for display math */
        ['$$', '$$'],
        ['\\[', '\\]']
      ]
    }
  };
  </script>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script type="text/javascript" id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
  </script>
  <script defer src="/app.js"></script>
<script
  async
  src="https://www.googletagmanager.com/gtag/js?id=G-KGYYX7MFB2"
></script>
<script>
  /* global dataLayer */
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag("js", new Date());
  gtag("config", "G-KGYYX7MFB2");
</script>
 <body data-spy="scroll" data-target="#toc">
<div id="sidebar" class="d-flex flex-column align-items-end">
 <div class="profile-wrapper text-center">
   <div id="avatar">
      <a href="/" alt="avatar" class="mx-auto">
        <img src="/assets/img/profile.jpg" alt="avatar" onerror="this.style.display='none'">
      </a>
   </div>
   <div class="site-title mt-3">
      <a href="/">Jai Krishna</a>
   </div>
   <div class="site-subtitle font-italic">Robotics | Electronics | Design</div>
 </div>
 <ul class="w-100">
   <li class="nav-item">
      <a href="/" class="nav-link">
        <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i>
        <span>HOME</span>
      </a>
   <li class="nav-item">
      <a href="/projects/" class="nav-link">
        <i class="fa-fw fas fa-microchip ml-xl-3 mr-xl-3 unloaded"></i>
        <span>PROJECTS</span>
      </a>
   <li class="nav-item">
      <a href="/resources/" class="nav-link">
        <i class="fa-fw fas fa-chalkboard-teacher ml-xl-3 mr-xl-3 unloaded"></i>
        <span>RESOURCES</span>
      </a>
   <li class="nav-item">
      <a href="/categories/" class="nav-link">
        <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i>
        <span>CATEGORIES</span>
      </a>
   <li class="nav-item">
      <a href="/archives/" class="nav-link">
        <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i>
        <span>ARCHIVES</span>
      </a>
   <li class="nav-item">
      <a href="/about/" class="nav-link">
        <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i>
        <span>ABOUT | CONTACT</span>
      </a>
   <li class="nav-item">
      <a href="/tags/" class="nav-link">
        <i class="fa-fw fas fa-chalkboard-teacher ml-xl-3 mr-xl-3 unloaded"></i>
        <span>TAGS</span>
      </a>
 </ul>
 <div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center">
      <a href="https://github.com/TextZip" aria-label="github"
        class="order-3"
        target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
      <a href="
          javascript:location.href = 'mailto:' + ['textzip','gmail.com'].join('@')" aria-label="email"
        class="order-4"
        >
        <i class="fas fa-envelope"></i>
      </a>
      <a href="https://www.linkedin.com/in/jai-krishna-bandi" aria-label="linkedin"
        class="order-5"
        target="_blank" rel="noopener">
        <i class="fab fa-linkedin"></i>
      </a>
        <span class="icon-border order-2"></span>
      <span id="mode-toggle-wrapper" class="order-1">
<i class="mode-toggle fas fa-adjust"></i>
<script type="text/javascript">
  class ModeToggle {
    static get MODE_KEY() { return "mode"; }
    static get DARK_MODE() { return "dark"; }
    static get LIGHT_MODE() { return "light"; }
    constructor() {
      if (this.hasMode) {
        if (this.isDarkMode) {
          if (!this.isSysDarkPrefer) {
            this.setDark();
          }
        } else {
          if (this.isSysDarkPrefer) {
            this.setLight();
          }
        }
      }
      var self = this;
      /* always follow the system prefers */
      this.sysDarkPrefers.addListener(function() {
        if (self.hasMode) {
          if (self.isDarkMode) {
            if (!self.isSysDarkPrefer) {
              self.setDark();
            }
          } else {
            if (self.isSysDarkPrefer) {
              self.setLight();
            }
          }
          self.clearMode();
        }
        self.updateMermaid();
      });
    } /* constructor() */
    setDark() {
      $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE);
      sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE);
    }
    setLight() {
      $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE);
      sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE);
    }
    clearMode() {
      $('html').removeAttr(ModeToggle.MODE_KEY);
      sessionStorage.removeItem(ModeToggle.MODE_KEY);
    }
    get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); }
    get isSysDarkPrefer() { return this.sysDarkPrefers.matches; }
    get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; }
    get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; }
    get hasMode() { return this.mode != null; }
    get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); }
    /* get the current mode on screen */
    get modeStatus() {
      if (this.isDarkMode
        || (!this.hasMode && this.isSysDarkPrefer) ) {
        return ModeToggle.DARK_MODE;
      } else {
        return ModeToggle.LIGHT_MODE;
      }
    }
    updateMermaid() {
      if (typeof mermaid !== "undefined") {
        let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default");
        let config = { theme: expectedTheme };
        /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */
        $(".mermaid").each(function() {
          let svgCode = $(this).prev().children().html();
          $(this).removeAttr("data-processed");
          $(this).html(svgCode);
        });
        mermaid.initialize(config);
        mermaid.init(undefined, ".mermaid");
      }
    }
    flipMode() {
      if (this.hasMode) {
        if (this.isSysDarkPrefer) {
          if (this.isLightMode) {
            this.clearMode();
          } else {
            this.setLight();
          }
        } else {
          if (this.isDarkMode) {
            this.clearMode();
          } else {
            this.setDark();
          }
        }
      } else {
        if (this.isSysDarkPrefer) {
          this.setLight();
        } else {
          this.setDark();
        }
      }
      this.updateMermaid();
    } /* flipMode() */
  } /* ModeToggle */
  let toggle = new ModeToggle();
  $(".mode-toggle").click(function() {
    toggle.flipMode();
  });
</script>
      </span>
 </div>
</div>
<div id="topbar-wrapper" class="row justify-content-center topbar-down">
 <div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between">
    <span id="breadcrumb">
        <span>
          <a href="/">
            Posts
          </a>
        </span>
          <span>Dino Game Arduino Edition</span>
    </span>
    <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i>
   <div id="topbar-title">
      Post
   </div>
    <i id="search-trigger" class="fas fa-search fa-fw"></i>
    <span id="search-wrapper" class="align-items-center">
      <i class="fas fa-search fa-fw"></i>
      <input class="form-control" id="search-input" type="search"
        aria-label="search" autocomplete="off" placeholder="Search...">
      <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i>
    </span>
    <span id="search-cancel" >Cancel</span>
 </div>
</div>
   <div id="main-wrapper">
     <div id="main">
<div class="row">
 <div id="post-wrapper" class="col-12 col-lg-11 col-xl-8">
   <div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4">
     <h1 data-toc-skip>Dino Game Arduino Edition</h1>
     <div class="post-meta text-muted d-flex flex-column">
       <div>
          <span class="semi-bold">
            Bandi Jai Krishna
          </span>
<em class="timeago"
    data-ts="1623613220"
      data-toggle="tooltip" data-placement="bottom" 
      title="Mon, Jun 14, 2021,  1:10 AM +0530"
    >
  2021-06-14
</em>
       </div>
       <div>
          <span>
<em class="timeago lastmod"
    data-ts="1641455632"
      data-toggle="tooltip" data-placement="bottom" 
      title="Thu, Jan  6, 2022,  1:23 PM +0530"
    >
  2022-01-06
</em>
          </span>
<span class="readtime" data-toggle="tooltip" data-placement="bottom" title="956 words">5 min</span>
       </div>
     </div>
     <div class="post-content">
       <h2 id="introduction">Introduction</h2>
<p>I always had a thing for wearable electronics, a few months ago I got a cheap TFT display to play around with and the ultimate goal was to get familiar with all the electronics so that I can try to scale everything down and make a (hopefully portable) smartwatch.</p>
<p>I stumbled upon the flappy bird game for arduino by <a href="https://www.mrt-prodz.com/blog/view/2015/03/flappy-bird-clone-on-the-atmega328-arduino-uno">mrt-prodz</a> while looking for some good projects with the TFT display, after playing the game for a couple of times, I decided to build my own version of the classic “Dino Game” from chromium.</p>
<p>All the code files and assets for the project can be found in the following repo:</p>
<p><a href="https://github.com/TextZip/Dino-Game-Arduino-Edition"><img src="https://gh-card.dev/repos/TextZip/Dino-Game-Arduino-Edition.svg" alt="TextZip/Dino-Game-Arduino-Edition - GitHub" /></a></p>
<h2 id="hardware--schematics">Hardware &amp; Schematics</h2>
<h3 id="components">Components</h3>
<ol>
 <li>Arduino Uno
 <li>Push Button
 <li>TFT Display 1.8 Inches (128x160)
 <li>Buzzer
 <li>A few jumpers
</ol>
<h3 id="schematic">Schematic</h3>
<p>The TFT display I got is based on the ST7735 Driver IC while it also had an SD card slot I ended up saving all the required data in flash as I didn’t have an SD card at hand. The wiring for the TFT was a bit of a pain but thanks to help from <a href="https://www.tweaking4all.com/hardware/arduino/sainsmart-arduino-color-display/">Tweaking4all</a> I finally got it running.</p>
<p>The other connections for the buzzer and the push button are quite easy and require no explanation.
I did notice that the flappy bird game didn’t actually use an interrupt based trigger but rather had a normal digitalRead function. I decided to use the internal pull and the external interrupt triggered ISR for servicing the user input via the digital pin 2.</p>
<p>The Display uses SPI communication, so I ended up using the SPI hardware pins of the ardunio uno for communicating with the display. Tinkercad doesn’t have a model for the TFT display, so I just labeled the connections and dropped them onto a breadboard.
<img src="/assets/img/DinoGame/schematic_tinkercad.png" alt="image1" class="shadow" /></p>
<p>My final setup with everything jam-packed into a tiny breadboard, as I didn’t have anything bigger than this with me.
<img src="/assets/img/DinoGame/schematic_real.png" alt="image1" class="shadow" /></p>
<p>Another view of my TFT display for anyone’s reference
<img src="/assets/img/DinoGame/TFTDisplay_side.png" alt="image1" class="shadow" /></p>
<h2 id="software">Software</h2>
<p>The software stack can be broken down into the following sub-tasks</p>
<h3 id="make-a-box-that-jumps">Make a box that jumps</h3>
<p>This step was supposed to be fairly easy and people actually use the euler’s integration method to give an object some force (acceleration) and then compute the velocity and displacement numerically using a very small dt.</p>
\[acceleration = force / mass\]
\[Delta_{position} = velocity * dt\]
\[Delta_{velocity} = acceleration * dt\]
<p>I for some reason ended up using the equation of motion of a projectile under constant acceleration.</p>
\[y = ut + \dfrac{1}{2}at^2\]
<p>Everytime the button was pushed the box ended up with an initial velocity of $30 m/s$, I played around with the value of acceleration due to gravity and the initial velocity to get the right jump response.</p>
<p><img src="/assets/img/DinoGame/jumping_box.gif" alt="Image1" class="center" />
<em>Things ended up looking like this (PS: don’t mind the moving cactus in the background)</em></p>
<h3 id="draw-cactus-and-make-it-move-around">Draw cactus and make it move around</h3>
<p>I used some basic shapes (rounded rectangles) to make a cactus like object and gave it a constant velocity in the -ve x direction to make it look like the dino is moving forward.</p>
<p>I used the brush method that was discussed in the <a href="https://www.mrt-prodz.com/blog/view/2015/03/flappy-bird-clone-on-the-atmega328-arduino-uno">mrt-prodz</a> post for animations, which basically meant I erased the old pixels by drawing the background color over them and then drew the required colors over the new pixels, therefore I had to change a few selected pixels in each frame rather than the whole 128x160 of them.</p>
<h3 id="replace-box-with-a-dino">Replace box with a dino</h3>
<p>I next tried replacing the box with a dino(bitmap), it looked like the dino was skating over the floor, and was quite artificial.</p>
<p><img src="/assets/img/DinoGame/dinoSkating.gif" alt="Image1" class="shadow" /></p>
<p>I decided to make the dino walk as the original game does that as well, after snipping the two walking frames from the sprite sheet, I tried a simple code where I switched between the frames to make it look like the dino is walking.</p>
<h3 id="walking-vs-skating-dino">Walking vs Skating Dino</h3>
<p>The above method was a partial success as the entire dino image was now having a weird flicker due to the update speed and I realised that I was updating the whole dino bitmap but most of the body was stationary and only the legs were supposed to move.</p>
<p><img src="/assets/img/DinoGame/dinoFlicker.gif" alt="image1" class="shadow" /></p>
<p>I ended up fixing this by breaking the 2 dino frames into 2 parts each (4 in total), where the top part of each frame was the body and the bottom part was the leg, luckily the animation was setup in such a way that the body of the dino never actually changed between the two frames and only the leg positions were changed, so I fixed the body and only updated the leg parts of the dino, this eliminated most or if not all the flicker and I ended up with a very smooth looking animation.</p>
<p><img src="/assets/img/DinoGame/dinoWalking.gif" alt="image1" class="shadow" /></p>
<h3 id="adding-clouds-sounds-score-and-other-minor-details">Adding Clouds, Sounds, Score and other minor details</h3>
<p>I now added other small details like sounds, intro and game over frames. I also added the score display and other features. I wanted to give a cloudy background for the game as the original has as it not only helps in the aesthetics but also in showing that the dino is moving relative to the background all the time.</p>
<p><img src="/assets/img/DinoGame/Home.gif" alt="image1" class="shadow" /></p>
<p>I tired using clouds from bitmaps but there was a bit too much of a flicker in the clouds and there were soo small that I their features hardly mattered, so I ended up replacing the bitmaps with regular rounded rectangles which improved the game performance a lot.</p>
<h2 id="results">Results</h2>
<p>After fixing a few more bugs I finally had a working dino game</p>
<iframe width="640" height="385" src="https://www.youtube.com/embed/1rK0tkbr8Z8" frameborder="0" allowfullscreen=""></iframe>
<h2 id="future-upgrades">Future Upgrades</h2>
<p>While I don’t have immediate plans for improvements, I do have a few features in mind that I wana implement.</p>
<ul class="task-list">
 <li class="task-list-item" hide-bullet><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Add Lives
 <li class="task-list-item" hide-bullet><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Dino has powers (Fire breathing)
 <li class="task-list-item" hide-bullet><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />New obstacles (Birds?)
 <li class="task-list-item" hide-bullet><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Remove the flicker due to jumps
</ul>
     </div>
     <div class="post-tail-wrapper text-muted">
       <div class="post-meta mb-3">
          <i class="far fa-folder-open fa-fw mr-1"></i>
            <a href='/categories/projects/'>Projects</a>,
            <a href='/categories/diy/'>DIY</a>
       </div>
       <div class="post-tags">
          <i class="fa fa-tags fa-fw mr-1"></i>
          <a href="/tags/tft/"
            class="post-tag no-text-decoration" >TFT</a>
          <a href="/tags/dino/"
            class="post-tag no-text-decoration" >Dino</a>
          <a href="/tags/arduino/"
            class="post-tag no-text-decoration" >Arduino</a>
          <a href="/tags/game/"
            class="post-tag no-text-decoration" >game</a>
         </div>
       <div class="post-tail-bottom
          d-flex justify-content-between align-items-center mt-3 pt-5 pb-2">
         <div class="license-wrapper">
            This post is licensed under
            <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>
            by the author.
         </div>
<div class="share-wrapper">
  <span class="share-label text-muted mr-1">Share</span>
  <span class="share-icons">
        <a href="https://twitter.com/intent/tweet?text=Dino Game Arduino Edition - Jai Krishna&url=https://textzip.github.io/posts/Dino-Game-Arduino/" data-toggle="tooltip" data-placement="top"
          title="Twitter" target="_blank" rel="noopener" aria-label="Twitter">
          <i class="fa-fw fab fa-twitter"></i>
        </a>
        <a href="https://www.facebook.com/sharer/sharer.php?title=Dino Game Arduino Edition - Jai Krishna&u=https://textzip.github.io/posts/Dino-Game-Arduino/" data-toggle="tooltip" data-placement="top"
          title="Facebook" target="_blank" rel="noopener" aria-label="Facebook">
          <i class="fa-fw fab fa-facebook-square"></i>
        </a>
        <a href="https://telegram.me/share?text=Dino Game Arduino Edition - Jai Krishna&url=https://textzip.github.io/posts/Dino-Game-Arduino/" data-toggle="tooltip" data-placement="top"
          title="Telegram" target="_blank" rel="noopener" aria-label="Telegram">
          <i class="fa-fw fab fa-telegram"></i>
        </a>
    <i class="fa-fw fas fa-link small" onclick="copyLink()"
        data-toggle="tooltip" data-placement="top" title="Copy link"></i>
  </span>
</div>
       </div>
     </div>
   </div>
 </div>
<div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down">
 <div class="access">
   <div id="access-lastmod" class="post">
      <span>Recent Update</span>
     <ul class="post-content pl-0 pb-1 ml-1 mt-2">
       <li><a href="/posts/Loco-DRL/">Proprioceptive Locomotion in Unstructured Environments</a>
       <li><a href="/posts/FTG-DRL/">Policy Modulated Trajectory Generation for Quadrupeds</a>
       <li><a href="/posts/NST-DRL/">Neural Style Transfer for Locomotion</a>
       <li><a href="/posts/LIDAR-DRL/">Locomotion with Weighted Belief in Exteroception</a>
       <li><a href="/posts/BiMan-DRL/">Bi-Manual Loco-Manipulation in Quadrupeds for Opening Doors</a>
     </ul>
   </div>
   <div id="access-tags">
      <span>Trending Tags</span>
     <div class="d-flex flex-wrap mt-3 mb-1 mr-3">
        <a class="post-tag" href="/tags/atmega328p/">atmega328p</a>
        <a class="post-tag" href="/tags/imu/">imu</a>
        <a class="post-tag" href="/tags/game/">game</a>
        <a class="post-tag" href="/tags/reinforcement-learning/">reinforcement learning</a>
        <a class="post-tag" href="/tags/bellman/">bellman</a>
        <a class="post-tag" href="/tags/mdp/">mdp</a>
        <a class="post-tag" href="/tags/optimal-value/">optimal value</a>
        <a class="post-tag" href="/tags/touch/">touch</a>
        <a class="post-tag" href="/tags/quadruped/">quadruped</a>
        <a class="post-tag" href="/tags/ros/">ros</a>
     </div>
   </div>
 </div>
    <script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script>
   <div id="toc-wrapper" class="pl-0 pr-4 mb-5">
      <span class="pl-3 pt-2 mb-2">Contents</span>
     <nav id="toc" data-toggle="toc"></nav>
   </div>
</div>
</div>
<div class="row">
 <div class="col-12 col-lg-11 col-xl-8">
   <div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4">
 <div id="related-posts" class="mt-5 mb-2 mb-sm-4">
   <h3 class="pt-2 mt-1 mb-4 ml-1"
      data-toc-skip>Further Reading</h3>
   <div class="card-deck mb-4">
     <div class="card">
        <a href="/posts/Gaming-Wheel/">
         <div class="card-body">
<em class="timeago small"
    data-ts="1545486200"
    >
  2018-12-22
</em>
           <h3 class="pt-0 mt-1 mb-3" data-toc-skip>Gaming Wheel</h3>
           <div class="text-muted small">
             <p>
A cheap and affordable gaming wheel based on the Atmega-328p,
MPU6050 and capacitive touch sensors for an immersive gaming
experience.
Hardware
  Arduino Uno
  ADXL345 (or any IMU or tilt senso...
             </p>
           </div>
         </div>
        </a>
     </div>
     <div class="card">
        <a href="/posts/COVID19/">
         <div class="card-body">
<em class="timeago small"
    data-ts="1626248600"
    >
  2021-07-14
</em>
           <h3 class="pt-0 mt-1 mb-3" data-toc-skip>Plug-and-Play Oxygen Auto-flow Regulator for Low Flow Oxygen Therapy</h3>
           <div class="text-muted small">
             <p>
A portable, easy to interface device that intelligently controls the oxygen flow rate based on oxygen saturation and other vitals.
This work has been published, please find the full details in ...
             </p>
           </div>
         </div>
        </a>
     </div>
     <div class="card">
        <a href="/posts/QDD/">
         <div class="card-body">
<em class="timeago small"
    data-ts="1634391800"
    >
  2021-10-16
</em>
           <h3 class="pt-0 mt-1 mb-3" data-toc-skip>Quasi Direct Drive Actuator</h3>
           <div class="text-muted small">
             <p>
An open-source Quasi Direct Drive Actuator for use in locomotion centric projects.
Note: The project is ongoing, the blog post will be updated as the project progresses.
Hardware
  400kv BLDC
...
             </p>
           </div>
         </div>
        </a>
     </div>
   </div>
 </div>
<div class="post-navigation d-flex justify-content-between">
  <a href="/posts/Manipulator-Workspace-Plotter/" class="btn btn-outline-primary"
    prompt="Older">
   <p>Manipulator Workspace Plotter</p>
  </a>
  <a href="/posts/COVID19/" class="btn btn-outline-primary"
    prompt="Newer">
   <p>Plug-and-Play Oxygen Auto-flow Regulator for Low Flow Oxygen Therapy</p>
  </a>
</div>
    <script src="https://utteranc.es/client.js"
        repo="TextZip/textzip.github.io"
        issue-term="title"
        theme="dark-blue"
        crossorigin="anonymous"
        async>
    </script>
   </div>
 </div>
</div>
<footer class="d-flex w-100 justify-content-center">
 <div class="d-flex justify-content-between align-items-center">
   <div class="footer-left">
     <p class="mb-0">
        © 2025
        <a href="https://github.com/TextZip">Bandi Jai Krishna</a>.
        <span data-toggle="tooltip" data-placement="top"
          title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span>
     </p>
   </div>
   <div class="footer-right">
     <p class="mb-0">
        Powered by
        <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>
        with
        <a href="https://github.com/cotes2020/jekyll-theme-chirpy"
          target="_blank" rel="noopener">Chirpy</a>
        theme.
     </p>
   </div>
 </div>
</footer>
     </div>
<div id="search-result-wrapper" class="d-flex justify-content-center unloaded">
 <div class="col-12 col-sm-11 post-content">
   <div id="search-hints">
     <h4 class="text-muted mb-4">Trending Tags</h4>
        <a class="post-tag" href="/tags/atmega328p/">atmega328p</a>
        <a class="post-tag" href="/tags/imu/">imu</a>
        <a class="post-tag" href="/tags/game/">game</a>
        <a class="post-tag" href="/tags/reinforcement-learning/">reinforcement learning</a>
        <a class="post-tag" href="/tags/bellman/">bellman</a>
        <a class="post-tag" href="/tags/mdp/">mdp</a>
        <a class="post-tag" href="/tags/optimal-value/">optimal value</a>
        <a class="post-tag" href="/tags/touch/">touch</a>
        <a class="post-tag" href="/tags/quadruped/">quadruped</a>
        <a class="post-tag" href="/tags/ros/">ros</a>
   </div>
   <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div>
 </div>
</div>
   </div>
   <div id="mask"></div>
    <a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button">
      <i class="fas fa-angle-up"></i>
    </a>
<script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script>
<script>
SimpleJekyllSearch({
  searchInput: document.getElementById('search-input'),
  resultsContainer: document.getElementById('search-results'),
  json: '/assets/js/data/search.json',
  searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0">  <a href="https://textzip.github.io{url}">{title}</a> <div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1">    {categories}    {tags} </div><p>{snippet}</p></div>',
  noResultsText: '<p class="mt-5">Oops! No result founds.</p>',
  templateMiddleware: function(prop, value, template) {
    if (prop === 'categories') {
      if (value === '') {
        return `${value}`;
      } else {
        return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`;
      }
    }
    if (prop === 'tags') {
      if (value === '') {
        return `${value}`;
      } else {
        return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`;
      }
    }
  }
});
</script>
  
